<!DOCTYPE html>
<html>
<head>
    <title>Chat Interface 1.0</title>
    <style>
  #chat-box {
  max-width: 500px;
  margin: 0 auto;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

#chat-messages {
  max-height: 300px;
  overflow-y: scroll;
  margin-bottom: 10px;
}

p {
  font-size: 14px;
  line-height: 1.4;
  margin: 5px;
  padding: 5px 10px;
  border-radius: 10px;
}

.you {
  background-color: #e6f3ff;
  float: right;
  clear: both;
  margin-right: 10px;
}

.server {
  background-color: #f2f2f2;
  float: left;
  clear: both;
  margin-left: 10px;
}

@media only screen and (max-width: 600px) {
  #chat-box {
    max-width: 100%;
    border-radius: 0;
    border: none;
    padding: 10px;
  }

  #chat-messages {
    max-height: 200px;
  }

  p {
    font-size: 12px;
    margin: 5px;
  }

  .you, .server {
    margin-right: 0;
    margin-left: 0;
  }

  .you {
    float: none;
  }

  .server {
    float: none;
  }
}
        
        
    </style>
</head>
<body>
    <div id="chat-box">
        <div id="chat-messages"></div>
        <form>
            <input type="text" id="user-input" placeholder="Type your message here..." />
            <button type="submit">Send</button>
        </form>
    </div>

    <script>
        const chatMessages = document.getElementById('chat-messages');
        const form = document.querySelector('form');
        const userInput = document.getElementById('user-input');
        var dataset = [];
        form.addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent the form from submitting normally

            const val = userInput.value;
            dataset.push(val);
            const message = dataset.join('\n\n');
            userInput.value = '';
            addMessage('You', val);

            fetch('https://custom-openai.azurewebsites.net/api/custom?code=YVq2mZRI7fgiknIWDVe3WVmYpbBgrMiGnWhx9JNC11PIAzFuChMpAg==', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message })
            })
            .then(response => response.json())
            .then(data => addMessage('Server', data.message))
            .then(data => dataset.push(data))
            .catch(error => console.error(error));
        });

        function addMessage(sender, message) {
            const messageElement = document.createElement('p');
            messageElement.classList.add(sender.toLowerCase());
            messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to bottom of messages
            return message;
        }
    </script>
</body>
</html>
